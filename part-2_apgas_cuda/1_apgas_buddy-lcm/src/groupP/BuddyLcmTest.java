package groupP;

import org.junit.Assert;
import org.junit.Test;

import java.io.ByteArrayOutputStream;
import java.io.PrintStream;

import static org.hamcrest.text.MatchesPattern.matchesPattern;

public class BuddyLcmTest {
    private String execute(String params) {
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        PrintStream ps = new PrintStream(baos);
        PrintStream old = System.out;

        System.setOut(ps);
        BuddyLcm.main(params.split(" "));

        System.out.flush();
        System.setOut(old);

        return baos.toString();
    }

    @Test
    public void testA() {
        Assert.assertThat(execute("128 1000 123 345 1100 false"), matchesPattern(
                "\\[APGAS\\] Starting Places time: [0-9\\.]+ sec\n" +
                "there are no buddies for the following elements\n" +
                "\\[19:59, 22:76, 26:94, 38:106, 45:39, 52:45, 52:74, 56:29, 56:58, 59:47, 114:102, 122:24, 126:113\\]\n" +
                "Process time = [0-9\\.]+ sec\n"
        ));
    }

    @Test
    public void testB() {
        Assert.assertThat(execute("2 10 123 456 20 true"), matchesPattern(
                "\\[APGAS\\] Starting Places time: [0-9\\.]+ sec\n" +
                        "there are no buddies for the following elements\n" +
                        "\\[0:1, 1:1\\]\n" +
                        "a =\n" +
                        "\\[3, 1\\]\n" +
                        "\\[8, 1\\]\n" +
                        "b =\n" +
                        "\\[9, 4\\]\n" +
                        "\\[5, 10\\]\n" +
                        "Found buddy positions in b=\n" +
                        "\\[1:1, -1:-1\\]\n" +
                        "\\[1:0, -1:-1\\]\n" +
                        "Found lcms=\n" +
                        "\\[30, -1\\]\n" +
                        "\\[40, -1\\]\n" +
                        "Process time = [0-9\\.]+ sec\n"
        ));
    }

    @Test
    public void testC() {
        Assert.assertThat(execute("32 1000 123 345 -1 false"), matchesPattern(
                "\\[APGAS\\] Starting Places time: [0-9\\.]+ sec\n" +
                        "all elements have found buddies\n" +
                        "Process time = [0-9\\.]+ sec\n"
        ));
    }

    @Test
    public void testD() {
        Assert.assertThat(execute("2048 10000 123 456 50000 false"), matchesPattern(
                "\\[APGAS\\] Starting Places time: [0-9\\.]+ sec\n" +
                        "there are no buddies for the following elements\n" +
                        "\\[0:1535, 1:535, 3:613, 3:1278, 5:658, 6:1627, 7:724, 8:1069, 10:464, 11:1435, 12:505, 12:1333, 12:1370, 14:1462, 15:35, 15:870, 16:943, 19:277, 19:1327, 20:595, 20:1176, 21:1863, 22:640, 22:1375, 23:1502, 25:1070, 26:1201, 27:134, 29:220, 29:1492, 30:1655, 31:278, 32:1557, 33:906, 35:1463, 36:13, 37:821, 38:1564, 40:163, 40:1282, 40:1656, 41:1531, 42:503, 43:1355, 44:593, 44:1226, 46:967, 46:1403, 47:1530, 48:980, 49:378, 49:1098, 49:1716, 53:1520, 54:760, 54:1000, 56:58, 56:838, 56:1553, 56:1878, 57:244, 59:285, 61:627, 61:1669, 62:1804, 63:685, 63:1023, 64:1706, 65:1901, 67:1127, 67:1420, 67:1717, 67:1754, 68:337, 70:382, 70:1453, 71:1652, 72:256, 72:1545, 73:1744, 74:884, 75:1248, 76:962, 76:1443, 76:1777, 77:24, 78:1345, 78:1606, 79:1918, 80:1874, 81:1125, 82:2028, 83:522, 85:571, 85:1727, 85:2039, 87:905, 88:1734, 89:191, 90:1185, 90:1920, 93:685, 94:1757, 95:698, 96:1923, 97:816, 97:1794, 98:406, 99:1674, 100:455, 100:492, 102:289, 102:1666, 103:1573, 104:64, 104:663, 105:1154, 107:2008, 108:1178, 108:1520, 110:1088, 111:435, 111:1219, 113:480, 113:1099, 114:1226, 115:640, 115:929, 116:1091, 117:974, 119:292, 119:1054, 120:1997, 121:333, 121:370, 121:1940, 122:1127, 124:746, 124:2005, 126:795, 128:105, 128:1889, 129:1800, 130:191, 131:1413, 132:1548, 134:599, 134:1116, 135:1247, 135:1645, 136:676, 137:1149, 138:2022, 139:384, 140:1440, 141:462, 143:267, 143:528, 143:1400, 145:601, 145:1248, 146:1187, 148:197, 151:1239, 152:405, 153:5, 154:418, 154:1340, 155:2027, 156:843, 157:1046, 158:70, 158:888, 158:1754, 160:198, 162:540, 164:1468, 164:1501, 165:724, 167:1794, 169:43, 169:1362, 170:1269, 172:1585, 173:513, 175:855, 175:1368, 177:721, 177:1201, 178:1368, 179:766, 180:108, 181:1401, 182:442, 185:1823, 187:856, 187:1684, 188:1847, 189:278, 191:327, 192:77, 192:637, 193:1421, 194:723, 195:1544, 196:1500, 197:813, 199:131, 199:1723, 201:176, 202:1493, 203:510, 204:1510, 205:95, 206:630, 207:948, 207:1321, 209:989, 210:282, 211:863, 213:1013, 213:1780, 214:491, 214:784, 214:1704, 215:1899, 216:825, 217:1991, 218:635, 220:969, 220:1729, 221:375, 222:1596, 223:420, 225:1525, 226:40, 228:826, 228:1626, 230:192, 231:502, 231:1562, 232:233, 233:551, 234:1629, 235:885, 237:1073, 237:1856, 240:387, 242:189, 243:1079, 243:1838, 244:234, 246:862, 247:1867, 248:736, 250:89, 251:1719, 252:388, 252:1654, 253:119, 255:508, 255:1695, 255:1988, 257:549, 257:842, 259:891, 260:1779, 261:201, 261:1694, 263:807, 265:885, 267:203, 267:930, 269:248, 269:1041, 270:606, 270:1976, 271:34, 275:1833, 277:1194, 278:467, 278:1069, 279:2016, 280:801, 282:867, 282:2047, 283:1676, 284:912, 284:945, 284:1807, 285:1022, 286:1709, 287:361, 287:1908, 289:406, 289:415, 291:492, 292:20, 292:802, 293:1131, 295:1223, 296:178, 296:1350, 297:2037, 298:296, 298:1215, 300:305, 300:1117, 301:655, 301:1252, 303:1344, 304:775, 304:1263, 306:1043, 308:427, 309:1050, 309:1091, 310:228, 310:2013, 311:1936, 311:1969, 312:78, 312:921, 312:1160, 313:1355, 314:966, 314:2038, 316:1281, 319:110, 319:516, 319:1647, 320:1774, 321:557, 322:1398, 323:899, 325:1097, 327:1475, 328:275, 328:1324, 328:1613, 330:609, 330:1181, 330:1523, 331:1714, 332:654, 333:716, 333:1218, 334:1381, 335:1310, 336:1229, 337:156, 339:234, 339:1595, 340:520, 341:1851, 342:593, 343:1675, 346:1712, 348:1462, 348:1804, 349:397, 349:1743, 351:463, 352:1703, 353:835, 354:1551, 355:880, 355:1742, 356:169, 357:970, 357:1246, 357:1652, 360:24, 360:678, 360:1319, 360:1612, 361:3, 362:764, 362:1704, 363:1643, 364:805, 365:1403, 366:1338, 366:1936, 367:2037, 369:307, 369:1817, 370:617, 370:1740, 372:662, 372:959, 372:1159, 372:1918, 373:1874, 375:1568, 375:1966, 377:389, 378:21, 378:124, 378:1665, 379:434, 379:1832, 380:1757, 381:564, 381:1892, 383:642, 383:1460, 384:1640, 384:1957, 386:270, 386:1818, 387:1671, 388:336, 389:1829, 390:377, 392:463, 392:1532, 394:805, 395:1024, 396:871, 398:948, 398:1365, 399:205, 401:63, 401:282, 401:656, 401:1006, 402:1693, 403:734, 405:783, 410:469, 410:1846, 411:531, 411:1977, 412:1200, 413:865, 413:1825, 415:666, 415:995, 418:367, 419:1630, 420:412, 420:1897, 421:1120, 421:1409, 422:470, 424:812, 424:1144, 426:1204, 427:184, 427:1891, 429:306, 430:1960, 431:355, 433:433, 435:785, 435:1020, 436:1215, 437:1898, 438:127, 438:1002, 439:181, 439:1990, 441:226, 442:656, 442:1980, 444:1892, 445:93, 445:1726, 448:1538, 450:128, 450:738, 450:1286, 451:1205, 452:575, 453:1329, 454:909, 456:995, 456:1112, 457:1566, 458:1199, 459:273, 459:1048, 461:403, 463:448, 465:782, 465:1172, 467:878, 467:1229, 468:1108, 469:67, 470:220, 471:530, 473:579, 474:1394, 476:1224, 477:1419, 480:159, 480:1467, 482:204, 482:493, 482:1254, 483:1449, 484:845, 485:1254, 486:890, 486:931, 488:976, 488:1257, 489:80, 491:716, 491:1358, 493:78, 493:774, 494:1294, 495:823, 497:1349, 498:1716, 500:317, 501:1771, 502:659, 503:713, 503:1642, 504:704, 504:1773, 505:758, 506:1314, 509:134, 509:207, 509:1680, 510:452, 510:1811, 512:530, 512:1616, 514:579, 514:904, 515:1598, 517:1508, 518:1353, 520:1214, 523:473, 523:1287, 524:1414, 525:267, 527:601, 528:1946, 529:475, 530:2033, 531:520, 531:1882, 533:1737, 534:148, 535:950, 536:2030, 537:1986, 538:292, 539:602, 540:333, 540:739, 541:1646, 542:1777, 544:1869, 547:60, 547:1572, 548:455, 548:853, 550:866, 552:984, 555:2015, 557:670, 559:756, 560:1802, 561:553, 561:878, 563:927, 565:8, 566:316, 567:1028, 568:38, 568:357, 568:1959, 569:1906, 570:699, 571:2007, 572:44, 572:744, 574:1702, 575:193, 576:1868, 577:238, 577:1221, 578:556, 579:1001, 580:634, 583:1250, 584:1215, 585:328, 585:1342, 587:369, 588:1041, 589:243, 589:767, 590:1133, 591:1089, 591:1824, 592:85, 592:101, 592:2019, 594:1158, 595:988, 597:1827, 598:648, 598:1042, 600:482, 600:1148, 601:1835, 602:792, 602:1050, 602:1347, 603:1371, 603:1664, 604:865, 604:1583, 606:1363, 607:286, 609:335, 609:1432, 611:669, 611:1556, 612:987, 612:1475, 614:1223, 615:1170, 615:1179, 616:27, 616:107, 617:417, 617:1271, 619:462, 620:1372, 621:804, 622:1132, 623:1009, 624:1944, 625:1163, 626:298, 626:1375, 628:347, 628:384, 629:1070, 629:1548, 630:149, 630:1679, 632:889, 632:1540, 633:1447, 635:231, 635:1605, 636:85, 637:276, 638:1202, 638:1576, 639:661, 640:1400, 641:706, 641:1275, 643:1448, 644:1579, 645:358, 646:1147, 647:1274, 647:1680, 648:542, 649:860, 649:1366, 650:591, 651:901, 652:1471, 653:711, 655:1175, 656:1312, 658:395, 660:440, 660:729, 661:1755, 662:774, 662:1636, 664:1396, 664:1461, 665:1303, 665:1596, 667:212, 667:1498, 668:1693, 670:1785, 671:127, 671:420, 671:717, 671:754, 672:1289, 673:803, 673:1488, 675:1593, 676:137, 676:1536, 678:182, 679:1569, 680:639, 681:1393, 682:684, 682:1710, 683:37, 683:994, 683:1649, 683:2023, 685:1783, 686:336, 686:1718, 688:1831, 689:456, 689:2022, 690:766, 691:1526, 692:815, 692:1721, 694:681, 697:309, 697:1850, 699:651, 699:1715, 700:1842, 701:453, 702:1934, 703:82, 703:498, 705:1456, 706:199, 707:1575, 709:1843, 709:1848, 710:334, 711:652, 711:1258, 712:1945, 717:1740, 718:1871, 720:465, 720:2029, 721:545, 722:56, 722:863, 723:1770, 724:908, 726:1780, 727:242, 729:1811, 730:426, 731:744, 732:1810, 735:851, 738:516, 738:1437, 742:431, 743:1232, 744:765, 745:2046, 746:1235, 747:117, 748:84, 748:1023, 749:203, 751:248, 752:558, 753:988, 754:1070, 759:394, 761:443, 761:777, 761:1546, 764:151, 764:1260, 765:985, 766:1411, 767:1260, 769:62, 770:658, 770:923, 772:4, 772:724, 773:1352, 774:802, 775:1377, 776:152, 776:851, 778:1160, 779:272, 781:345, 781:606, 781:1447, 783:655, 784:965, 784:1193, 786:1052, 787:539, 788:1615, 789:873, 790:28, 790:967, 791:918, 792:980, 793:1402, 794:1614, 796:420, 796:421, 796:1469, 798:498, 799:784, 799:1506, 801:874, 802:1506, 804:278, 805:1497, 806:327, 807:1345, 808:417, 808:1512, 810:69, 810:727, 810:1080, 811:125, 813:138, 813:211, 815:256, 817:1828, 818:1991, 819:942, 820:1828, 823:1534, 823:1607, 825:387, 826:1858, 828:571, 828:1362, 829:881, 831:1435, 832:223, 832:1626, 833:992, 833:1527, 834:281, 834:1718, 835:22, 836:653, 837:1434, 838:698, 840:828, 840:1156, 841:1546, 841:1843, 842:906, 844:1912, 845:258, 845:2043, 846:1630, 847:600, 849:641, 849:1703, 850:1830, 851:727, 852:1751, 853:1878, 854:373, 855:71, 855:1446, 856:450, 858:1743, 860:920, 860:1237, 860:1835, 861:1770, 862:998, 863:1571, 864:316, 864:1469, 864:1762, 866:357, 866:1086, 867:1217, 868:746, 868:1908, 870:795, 872:917, 872:1012, 873:1699, 874:1243, 875:259, 875:1114, 877:631, 877:2000, 879:689, 881:734, 881:1852, 883:1027, 883:1754, 884:1949, 886:236, 887:1599, 887:1997, 888:570, 889:1009, 890:656, 890:1700, 891:91, 891:1863, 892:697, 892:1236, 893:295, 898:445, 898:1015, 899:1142, 900:490, 900:787, 901:185, 901:920, 901:1308, 903:230, 904:1007, 905:296, 905:1880, 906:1099, 906:1136, 907:630, 907:1034, 907:1331, 908:1977, 908:2014, 910:1400, 911:2025, 912:132, 913:1805, 914:173, 914:1728, 916:259, 918:537, 919:1288, 919:1622, 920:667, 920:1561, 921:1190, 922:712, 922:1321, 923:1264, 924:1413, 927:142, 927:439, 927:1116, 929:484, 930:794, 931:1359, 932:843, 932:880, 932:2042, 933:1261, 934:265, 934:1396, 936:85, 937:374, 937:1127, 938:1056, 939:423, 939:1012, 939:1999, 940:1870, 941:757, 942:1545, 944:221, 946:266, 946:1138, 946:1467, 946:1801, 948:608, 949:1504, 950:704, 950:1699, 951:1596, 952:1791, 954:1295, 955:1486, 955:1828, 956:98, 956:397, 957:1302, 957:1343, 959:581, 960:1688, 961:923, 962:977, 963:1111, 965:1235, 966:1362, 968:471, 969:716, 970:1816, 971:794, 972:1609, 973:924, 973:1808, 975:1710, 976:264, 976:1841, 978:16, 978:598, 978:1721, 980:403, 980:1501, 981:1713, 982:737, 982:1624, 983:1805, 984:1684, 985:135, 987:180, 987:1749, 989:514, 989:1573, 991:674, 992:1621, 993:1756, 995:326, 995:1611, 996:2043, 997:375, 998:1055, 999:1738, 1000:788, 1000:1869, 1001:1092, 1002:829, 1002:1779, 1004:55, 1004:92, 1004:147, 1006:225, 1007:1895, 1008:641, 1008:2022, 1010:695, 1010:1870, 1012:772, 1014:830, 1016:1861, 1017:458, 1019:332, 1019:1962, 1021:666, 1022:89, 1022:1709, 1023:715, 1024:1278, 1026:423, 1027:1012, 1029:1069, 1031:573, 1032:171, 1033:1013, 1034:216, 1034:1960, 1036:294, 1037:1991, 1038:424, 1039:1020, 1040:796, 1040:1990, 1042:837, 1042:1799, 1043:130, 1043:1990, 1044:903, 1045:1050, 1046:4, 1046:63, 1047:237, 1049:141, 1051:154, 1053:1121, 1054:1288, 1055:618, 1056:1121, 1057:958, 1059:1079, 1062:1127, 1063:1062, 1064:215, 1066:567, 1067:2042, 1068:901, 1069:963, 1070:35, 1070:1019, 1071:1702, 1072:1833, 1073:430, 1074:2036, 1078:844, 1078:1643, 1080:1494, 1081:178, 1081:520, 1083:561, 1085:691, 1086:1241, 1087:769, 1088:1333, 1089:1256, 1090:93, 1090:397, 1091:1036, 1092:463, 1094:508, 1095:562, 1095:2027, 1096:1242, 1097:1373, 1098:1316, 1100:1076, 1101:1508, 1102:398, 1103:1363, 1104:447, 1104:1490, 1106:836, 1107:1856, 1108:877, 1108:1701, 1109:1106, 1110:1600, 1111:219, 1113:341, 1113:1306, 1114:35, 1114:1271, 1115:627, 1115:1398, 1117:672, 1117:705, 1118:1390, 1119:750, 1120:1300, 1121:1145, 1122:490, 1123:1587, 1124:556, 1126:597, 1126:1282, 1127:1206, 1127:1969, 1130:1749, 1131:1628, 1133:433, 1133:1786, 1134:80, 1134:495, 1135:478, 1136:540, 1136:1419, 1139:181, 1139:916, 1139:1520, 1139:1809, 1140:1732, 1141:226, 1141:1291, 1142:1824, 1143:312, 1144:1328, 1145:353, 1145:1523, 1147:806, 1147:1615, 1149:855, 1150:1310, 1150:1319, 1150:1652, 1150:1717, 1152:189, 1153:1420, 1154:255, 1154:1778, 1155:1029, 1156:40, 1156:627, 1157:1120, 1157:1851, 1158:961, 1159:29, 1160:794, 1162:1723, 1163:136, 1163:470, 1163:1850, 1164:1069, 1165:1012, 1166:1955, 1168:884, 1169:2003, 1170:925, 1171:1751, 1172:355, 1172:1698, 1173:409, 1174:1790, 1175:719, 1175:1921, 1177:796, 1177:1489, 1177:1863, 1179:74, 1180:159, 1180:1013, 1182:204, 1182:1391, 1184:282, 1185:1086, 1186:624, 1186:1773, 1188:976, 1188:1134, 1190:2020, 1191:1207, 1192:92, 1192:1398, 1193:103, 1195:225, 1195:1811, 1196:1026, 1197:597, 1197:1969, 1198:1880, 1199:2011, 1200:1940, 1201:997, 1201:1928, 1204:448, 1204:1627, 1206:1419, 1207:1354, 1209:854, 1209:1114, 1209:1520, 1211:940, 1212:530, 1212:1224, 1213:33, 1213:70, 1214:579, 1214:1348, 1215:1267, 1216:657, 1217:1015, 1218:787, 1220:1054, 1221:127, 1221:1185, 1222:1876, 1223:204, 1223:461, 1223:1420, 1224:1295, 1225:262, 1227:604, 1228:1211, 1229:1894, 1230:2025, 1231:1968, 1232:1625, 1233:384, 1235:457, 1236:1284, 1236:1618, 1238:902, 1240:951, 1241:1409, 1242:1576, 1243:1233, 1244:274, 1244:347, 1244:1144, 1245:354, 1247:46, 1247:1192, 1248:723, 1250:5, 1250:768, 1250:1481, 1253:102, 1253:508, 1253:1110, 1255:549, 1255:586, 1255:1276, 1257:635, 1259:693, 1259:1677, 1260:64, 1261:1437, 1262:321, 1262:1380, 1262:1637, 1264:439, 1264:1547, 1265:1428, 1266:240, 1266:529, 1267:95, 1268:574, 1270:999, 1270:1253, 1273:1288, 1273:1577, 1274:322, 1276:371, 1276:1291, 1278:1096, 1279:816, 1279:1291, 1281:889, 1283:175, 1285:253, 1287:669, 1288:1575, 1289:755, 1289:1766, 1291:800, 1291:1826, 1293:890, 1294:476, 1294:1605, 1296:598, 1297:1891, 1298:647, 1300:1642, 1301:91, 1302:1497, 1303:1632, 1305:419, 1305:1433, 1306:729, 1308:774, 1308:1248, 1311:413, 1312:1918, 1313:426, 1314:776, 1314:1781, 1315:1916, 1317:110, 1318:1927, 1320:230, 1321:548, 1321:1734, 1323:589, 1323:1821, 1325:931, 1329:1859, 1330:425, 1330:1794, 1332:1859, 1334:280, 1335:1309, 1337:197, 1337:1090, 1338:774, 1341:116, 1342:426, 1342:2041, 1343:792, 1344:1847, 1345:99, 1345:833, 1347:1884, 1350:1884, 1351:247, 1351:645, 1353:987, 1353:1887, 1356:1988, 1357:834, 1358:1674, 1360:462, 1360:1093, 1361:1784, 1362:804, 1362:1979, 1364:670, 1364:1301, 1366:76, 1366:719, 1367:1052, 1369:347, 1369:352, 1370:1339, 1371:149, 1371:2022, 1373:491, 1374:801, 1376:1075, 1376:1400, 1378:175, 1379:977, 1379:1123, 1382:1433, 1383:340, 1383:1039, 1384:762, 1385:1853, 1386:811, 1386:1141, 1387:1276, 1390:10, 1390:176, 1391:1663, 1392:217, 1392:559, 1393:84, 1394:893, 1394:1389, 1396:938, 1396:1269, 1397:1404, 1398:812, 1399:1261, 1401:440, 1402:1298, 1404:1390, 1405:584, 1405:1585, 1406:894, 1407:625, 1407:1089, 1408:1256, 1410:1137, 1411:1304, 1412:127, 1412:420, 1413:1482, 1414:62, 1414:461, 1414:1401, 1415:779, 1417:1286, 1418:899, 1420:209, 1420:1583, 1420:1620, 1421:1518, 1422:254, 1423:1907, 1424:596, 1426:1602, 1428:1480, 1429:1357, 1431:400, 1431:1117, 1431:1523, 1431:1784, 1432:67, 1432:1650, 1432:1723, 1433:197, 1433:234, 1433:847, 1434:1483, 1435:28, 1435:681, 1435:1418, 1437:991, 1437:1510, 1440:1209, 1440:1551, 1442:643, 1444:476, 1444:1648, 1446:554, 1446:1058, 1447:872, 1447:1989, 1448:1912, 1449:1439, 1449:1837, 1450:1972, 1451:248, 1452:1540, 1453:326, 1453:1703, 1455:375, 1455:1763, 1455:1832, 1456:685, 1456:1751, 1459:869, 1461:187, 1461:1824, 1463:521, 1463:1448, 1464:1579, 1465:566, 1466:1440, 1467:991, 1467:1571, 1467:1969, 1469:1609, 1470:1744, 1471:1939, 1472:338, 1474:212, 1474:2041, 1476:851, 1476:1491, 1476:1889, 1478:929, 1479:1560, 1481:97, 1481:1684, 1482:1847, 1483:399, 1484:709, 1484:1644, 1485:1839, 1486:786, 1486:1054, 1487:1741, 1490:1756, 1492:280, 1492:1536, 1493:590, 1493:1455, 1493:1492, 1494:1655, 1495:639, 1495:932, 1495:1284, 1496:1191, 1497:729, 1499:1292, 1500:71, 1500:362, 1502:411, 1502:1953, 1504:277, 1504:1100, 1505:2022, 1506:619, 1506:1897, 1508:929, 1510:974, 1511:239, 1511:1769, 1512:1904, 1513:1123, 1514:1996, 1515:374, 1515:780, 1517:821, 1517:858, 1519:907, 1519:1890, 1520:1797, 1521:1934, 1522:1153, 1524:593, 1525:687, 1527:700, 1527:1205, 1528:1404, 1531:1437, 1532:459, 1533:218, 1533:1005, 1534:504, 1536:838, 1536:1020, 1536:1053, 1537:1919, 1538:643, 1538:712, 1539:1043, 1541:340, 1543:381, 1543:1949, 1544:18, 1545:447, 1545:1048, 1546:1991, 1547:525, 1549:1462, 1551:1327, 1552:1242, 1554:1334, 1555:382, 1555:1465, 1556:748, 1560:1081, 1562:154, 1563:1394, 1564:203, 1564:601, 1566:943, 1566:1108, 1568:43, 1572:873, 1572:1466, 1573:1608, 1574:918, 1576:1897, 1578:1758, 1579:382, 1579:1600, 1579:1633, 1581:754, 1581:1725, 1583:820, 1584:1503, 1585:861, 1586:1308, 1587:0, 1587:179, 1587:1439, 1588:88, 1590:363, 1590:1797, 1592:697, 1593:759, 1593:1469, 1595:804, 1595:1592, 1598:445, 1598:1403, 1599:1762, 1600:490, 1601:98, 1602:576, 1602:1817, 1604:910, 1605:1827, 1608:1854, 1609:412, 1611:1857, 1613:519, 1613:917, 1616:259, 1616:1652, 1618:304, 1619:1700, 1620:1607, 1622:734, 1625:40, 1625:1468, 1626:130, 1628:179, 1629:1882, 1630:600, 1631:2033, 1632:673, 1634:983, 1636:1061, 1637:2039, 1638:1974, 1639:423, 1640:2039, 1641:468, 1641:501, 1642:1099, 1643:546, 1643:1782, 1645:612, 1645:1906, 1648:240, 1648:1573, 1650:318, 1651:1674, 1652:448, 1652:1995, 1654:489, 1654:831, 1654:1118, 1657:24, 1657:165, 1657:1121, 1658:2032, 1659:210, 1659:1213, 1660:1156, 1662:579, 1662:977, 1663:712, 1667:108, 1668:1029, 1669:149, 1669:442, 1669:1996, 1670:34, 1671:794, 1672:2007, 1673:843, 1674:1056, 1675:921, 1675:1702, 1675:1999, 1676:1214, 1677:1089, 1678:1802, 1680:391, 1680:1667, 1680:1712, 1680:2001, 1681:1912, 1682:1569, 1683:1736, 1684:526, 1684:855, 1684:1611, 1685:1796, 1686:868, 1688:1527, 1689:285, 1690:83, 1691:362, 1691:1575, 1692:648, 1692:1702, 1694:3, 1694:721, 1694:1612, 1695:1807, 1696:119, 1696:1180, 1697:1311, 1699:1403, 1701:269, 1702:1210, 1703:611, 1703:891, 1704:2029, 1705:936, 1707:1732, 1708:270, 1709:1878, 1710:1797, 1712:772, 1712:1921, 1714:850, 1715:1625, 1716:623, 1717:1717, 1718:957, 1718:1640, 1721:585, 1723:459, 1723:1517, 1725:793, 1726:1821, 1727:838, 1727:1700, 1729:1555, 1730:263, 1731:1060, 1732:276, 1732:1747, 1733:586, 1733:1938, 1735:13, 1735:704, 1735:1081, 1736:2011, 1740:390, 1741:1071, 1742:439, 1742:1754, 1744:517, 1744:923, 1744:1846, 1747:257, 1747:1849, 1749:1748, 1750:1593, 1751:368, 1753:1886, 1755:862, 1756:1941, 1757:180, 1758:55, 1758:1190, 1759:221, 1762:634, 1764:683, 1765:993, 1765:1906, 1767:2025, 1771:201, 1772:487, 1772:1085, 1774:564, 1776:898, 1776:1999, 1777:21, 1778:1123, 1779:1806, 1781:368, 1782:1879, 1783:377, 1783:446, 1785:1336, 1785:1625, 1787:959, 1788:1359, 1790:293, 1790:1420, 1792:306, 1794:466, 1794:731, 1794:1396, 1796:776, 1797:66, 1797:1113, 1799:1268, 1800:135, 1800:428, 1802:1250, 1803:612, 1804:922, 1805:653, 1805:1298, 1806:971, 1806:1205, 1808:1259, 1809:1397, 1811:401, 1811:1256, 1813:743, 1814:1545, 1815:788, 1815:1488, 1817:654, 1817:1289, 1820:282, 1821:1782, 1822:368, 1822:1388, 1823:1327, 1824:42, 1824:426, 1824:1454, 1825:744, 1825:1087, 1826:475, 1826:873, 1827:166, 1829:215, 1829:1326, 1831:1480, 1832:1399, 1834:621, 1834:1179, 1835:145, 1835:1867, 1836:1738, 1837:190, 1838:1593, 1842:604, 1844:1651, 1845:344, 1846:1502, 1847:385, 1847:1633, 1849:451, 1849:1725, 1850:1681, 1851:823, 1851:1848, 1854:157, 1855:1476, 1857:1044, 1857:1634, 1858:1541, 1859:1740, 1860:993, 1861:1533, 1862:762, 1862:1932, 1864:848, 1865:1955, 1866:158, 1867:1046, 1868:1962, 1869:342, 1870:1530, 1871:684, 1871:2024, 1873:725, 1873:1084, 1874:1771, 1876:1863, 1878:56, 1879:473, 1879:1558, 1881:847, 1881:1682, 1882:1601, 1883:860, 1884:258, 1885:1967, 1888:402, 1888:1007, 1888:1734, 1890:451, 1890:1185, 1892:78, 1892:872, 1892:2039, 1894:945, 1897:255, 1897:1794, 1898:565, 1898:1062, 1899:1001, 1899:1992, 1900:1867, 1902:1666, 1902:2040, 1903:773, 1905:818, 1905:1739, 1906:1866, 1907:136, 1907:1831, 1908:1958, 1910:512, 1911:1657, 1911:1694, 1912:590, 1913:27, 1913:908, 1914:1213, 1915:949, 1915:1904, 1916:1123, 1917:1250, 1918:402, 1920:451, 1922:785, 1922:1366, 1924:851, 1924:1895, 1925:172, 1925:493, 1925:1065, 1925:1407, 1926:37, 1927:7, 1927:294, 1929:380, 1931:421, 1931:1881, 1936:115, 1936:184, 1937:1888, 1938:193, 1938:1827, 1939:543, 1939:1042, 1940:1363, 1942:663, 1943:973, 1943:1111, 1943:1432, 1946:315, 1946:1424, 1947:23, 1948:360, 1948:1304, 1949:1435, 1950:809, 1951:544, 1951:1003, 1952:854, 1952:1130, 1952:1536, 1953:1095, 1954:1222, 1955:196, 1955:1178, 1955:1909, 1956:993, 1956:998, 1957:1364, 1959:626, 1961:500, 1963:541, 1963:1070, 1965:883, 1966:407, 1966:1549, 1966:1586, 1967:1492, 1967:1749, 1968:208, 1968:497, 1969:1317, 1970:542, 1970:1452, 1970:1850, 1972:1354, 1975:1641, 1977:122, 1978:13, 1978:1357, 1979:171, 1979:1300, 1980:481, 1980:1449, 1981:1392, 1983:857, 1984:951, 1984:1425, 1987:285, 1989:351, 1989:1220, 1989:1541, 1991:31, 1991:723, 1992:1255, 1993:768, 1993:1976, 1995:858, 1996:1500, 1997:976, 1997:1631, 1997:2029, 1999:1723, 2000:604, 2002:662, 2002:1824, 2004:711, 2004:1584, 2005:1523, 2006:789, 2007:195, 2008:1571, 2011:76, 2012:601, 2012:1423, 2013:1358, 2014:646, 2016:1431, 2017:322, 2019:664, 2021:493, 2023:1837, 2024:158, 2025:1653, 2026:207, 2026:1852, 2028:265, 2030:351, 2030:1031, 2031:1746, 2032:693, 2034:706, 2034:1969, 2035:10, 2036:836, 2037:1752, 2039:170, 2039:1585, 2040:1752, 2041:510, 2043:640, 2043:1785, 2045:718, 2047:767\\]\n" +
                        "Process time = [0-9\\.]+ sec\n"
        ));
    }

    @Test
    public void testE() {
        Assert.assertThat(execute("2 10 23 56 10 true"), matchesPattern(
                "\\[APGAS\\] Starting Places time: [0-9\\.]+ sec\n" +
                        "all elements have found buddies\n" +
                        "a =\n" +
                        "\\[8, 6\\]\n" +
                        "\\[4, 7\\]\n" +
                        "b =\n" +
                        "\\[4, 9\\]\n" +
                        "\\[5, 10\\]\n" +
                        "Found buddy positions in b=\n" +
                        "\\[1:0, 0:0\\]\n" +
                        "\\[1:0, 0:0\\]\n" +
                        "Found lcmss=\n" +
                        "\\[40, 12\\]\n" +
                        "\\[20, 28\\]\n" +
                        "Process time = [0-9\\.]+ sec\n"
        ));
    }

    @Test
    public void testF() {
        Assert.assertThat(execute("2 10 23 56 -1 true"), matchesPattern(
                "\\[APGAS\\] Starting Places time: [0-9\\.]+ sec\n" +
                        "all elements have found buddies\n" +
                        "a =\n" +
                        "\\[8, 6\\]\n" +
                        "\\[4, 7\\]\n" +
                        "b =\n" +
                        "\\[4, 9\\]\n" +
                        "\\[5, 10\\]\n" +
                        "Found buddy positions in b=\n" +
                        "\\[0:1, 1:0\\]\n" +
                        "\\[0:1, 1:1\\]\n" +
                        "Found lcms=\n" +
                        "\\[72, 30\\]\n" +
                        "\\[36, 70\\]\n" +
                        "Process time = [0-9\\.]+ sec\n"
        ));
    }
}
